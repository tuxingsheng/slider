!function(a){"use strict";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.Slider=a()}(function(){"use strict";function a(a){if(this.util={isArray:function(a){return a&&"object"==typeof a&&a.constructor==Array},isString:function(a){return a&&"string"==typeof a&&a.constructor==String},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},isObject:function(a){return null!==a&&"object"==typeof a},isEmpty:function(a){if(null==a)return!0;if(this.util.isArray(a)||this.util.isString(a))return 0===a.length;for(var b in a)if(this.util.hasOwn(a,b))return!1;return!0}.bind(this),extend:function(a,b){for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},this.defaults={el:".ue-slider",loop:!0,autoPlay:!0,autoTime:5e3,speed:300,pagination:!0},!this.util.isEmpty(a)){if(!this.util.isObject(a))throw Error("Slider配置必须是对象");this.defaults=this.util.extend(this.defaults,a)}this.slider=this.util.isString(this.defaults.el)?document.querySelector(this.defaults.el):this.defaults.el,this.sliderWidth=this.slider.offsetWidth,this.sliderContent=this.slider.querySelector(".ue-slider-content"),this.sliderBodyList=this.sliderContent.querySelectorAll(".ue-slider-body"),this.sliderBodyLength=this.sliderBodyList.length,this.init(),this.bindEvent()}return a.prototype.init=function(){var a,b,c;for(this.ratio=this.slider.offsetHeight/this.slider.offsetWidth,this.sliderWidth=this.slider.offsetWidth,this.sliderHeight=this.slider.offsetHeight,this.sliderContent.style.width=this.sliderWidth+"px",this.index=0,a=0;a<this.sliderBodyLength;a++)this.sliderBodyList[a].style.width=this.sliderWidth+"px",this.sliderBodyList[a].style.webkitTransform="translate3d("+a*this.sliderWidth+"px,0,0)",b=this.sliderBodyList[a].querySelector("img"),b.height/b.width>this.ratio?b.style.height=this.sliderHeight+"px":b.style.width=this.sliderWidth+"px";this.defaults.pagination&&this.createBullet(),this.defaults.loop&&(this.copyLists(),this.index=1,this.sliderBodyList=this.sliderContent.querySelectorAll(".ue-slider-body"),this.sliderBodyLength=this.sliderBodyList.length),this.defaults.autoPlay&&this.autoPlay(),c=null,window.addEventListener("resize",function(){this.util.isEmpty(c)||clearTimeout(c),c=setTimeout(function(){this.resizeInit()}.bind(this),500)}.bind(this),!1)},a.prototype.resizeInit=function(){var a,b;for(this.ratio=this.slider.offsetHeight/this.slider.offsetWidth,this.sliderWidth=this.slider.offsetWidth,this.sliderHeight=this.slider.offsetHeight,this.sliderContent.style.width=this.sliderWidth+"px",a=0;a<this.sliderBodyLength;a++)this.sliderBodyList[a].style.width=this.sliderWidth+"px",this.index>a?this.transform3d(this.sliderBodyList[a],-this.sliderWidth,!1):this.index<a&&this.transform3d(this.sliderBodyList[a],this.sliderWidth,!1),b=this.sliderBodyList[a].querySelector("img"),b.style.height=this.sliderHeight+"px",b.style.width=this.sliderWidth+"px"},a.prototype.copyLists=function(){var a=document.createElement("li"),b=document.createElement("li");a.classList.add("ue-slider-body"),a.style.cssText=this.sliderWidth+"px",a.style.webkitTransform="translate3d(-"+this.sliderWidth+"px,0,0)",a.innerHTML=this.sliderBodyList[this.sliderBodyLength-1].innerHTML,b.classList.add("ue-slider-body"),b.style.cssText=this.sliderWidth+"px",b.style.webkitTransform="translate3d("+this.sliderBodyLength*this.sliderWidth+"px,0,0)",b.innerHTML=this.sliderBodyList[0].innerHTML,this.sliderContent.insertBefore(a,this.sliderContent.firstChild),this.sliderContent.appendChild(b)},a.prototype.createBullet=function(){var b,c,a=document.createElement("div");for(a.className="ue-slider-indicator",b=0;b<this.sliderBodyLength;b++)c=document.createElement("span"),this.index==b&&(c.className="ue-active"),a.appendChild(c);this.slider.appendChild(a),this.bulletLists=a.getElementsByTagName("span"),this.bllength=this.bulletLists.length},a.prototype.autoPlay=function(){var a=this;clearInterval(a.timer),a.timer=setInterval(function(){a.move("+1")},a.defaults.autoTime)},a.prototype.stopPlay=function(){clearInterval(this.timer)},a.prototype.transform3d=function(a,b,c){if(!a)throw new Error("未指定动画元素！");a.style.webkitTransform="translate3d("+b+"px,0,0)",a.style.webkitTransition=c?this.defaults.speed+"ms ease-out":"none"},a.prototype.loopSetting=function(a){var b=this;switch(a){case 0:setTimeout(function(){var c,a=b.sliderBodyLength-2;for(b.index=a,b.transform3d(b.sliderBodyList[0],-b.sliderWidth,!1),b.transform3d(b.sliderBodyList[a],0,!1),b.transform3d(b.sliderBodyList[a+1],b.sliderWidth,!1),b.transform3d(b.sliderBodyList[a-1],-b.sliderWidth,!1),c=a-1;c>0;c--)b.transform3d(b.sliderBodyList[c],-b.sliderWidth,!1)},b.defaults.speed);break;case b.sliderBodyLength-1:setTimeout(function(){var c,a=1;for(b.index=a,b.transform3d(b.sliderBodyList[a],0,!1),b.transform3d(b.sliderBodyList[a+1],b.sliderWidth,!1),b.transform3d(b.sliderBodyList[a-1],-b.sliderWidth,!1),b.transform3d(b.sliderBodyList[b.sliderBodyLength-1],b.sliderWidth,!1),c=a+1;c<b.sliderBodyLength-1;c++)b.transform3d(b.sliderBodyList[c],b.sliderWidth,!1)},b.defaults.speed)}},a.prototype.move=function(a){var b,c;if("number"==typeof a?b=this.index:"string"==typeof a&&(b=this.index+1*a),b>this.sliderBodyLength-1?b=this.sliderBodyLength-1:0>b&&(b=0),this.defaults.pagination)for(c=0;c<this.bllength;c++)c==b-1?this.bulletLists[c].setAttribute("class","ue-active"):(this.bulletLists[c].setAttribute("class",""),b>this.bllength?this.bulletLists[0].setAttribute("class","ue-active"):0==b&&this.bulletLists[this.bllength-1].setAttribute("class","ue-active"));this.index=b,this.sliderBodyList[b]&&this.transform3d(this.sliderBodyList[b],0,!0),this.sliderBodyList[b+1]&&this.transform3d(this.sliderBodyList[b+1],this.sliderWidth,!0),this.sliderBodyList[b-1]&&this.transform3d(this.sliderBodyList[b-1],-this.sliderWidth,!0),this.defaults.loop&&this.loopSetting(this.index)},a.prototype.bindEvent=function(){var a=this,b=this.sliderWidth/3,c=function(b){a.startX=b.touches[0].pageX,a.offsetX=0,a.startTime=1*new Date,a.stopPlay()},d=function(b){var c,d;for(b.preventDefault(),a.offsetX=b.touches[0].pageX-a.startX,c=a.index-1,d=c+3,c;d>c;c++)a.sliderBodyList[c]&&a.transform3d(a.sliderBodyList[c],(c-a.index)*a.sliderWidth+a.offsetX,!1)},e=function(){var d=1*new Date;d-a.startTime>700?a.offsetX>=b?a.move("-1"):a.offsetX<-b?a.move("+1"):a.move("0"):a.offsetX>=60?a.move("-1"):a.offsetX<-60?a.move("+1"):a.move("0"),a.autoPlay()};a.slider.addEventListener("touchstart",c,!1),a.slider.addEventListener("touchmove",d,!1),a.slider.addEventListener("touchend",e,!1)},a});


